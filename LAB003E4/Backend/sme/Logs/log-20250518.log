2025-05-18 15:34:00.874 -03:00 [ERR] An error occurred using the connection to database 'lab003' on server 'tcp://localhost:5432'.
2025-05-18 16:44:20.389 -03:00 [ERR] An error occurred using the connection to database 'lab003' on server 'tcp://localhost:5432'.
2025-05-18 16:44:27.428 -03:00 [INF] Executed DbCommand (6,330ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE lab003;
2025-05-18 16:44:28.142 -03:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-05-18 16:44:28.150 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-05-18 16:44:28.153 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-05-18 16:44:28.165 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-05-18 16:44:28.179 -03:00 [INF] Applying migration '20250505034913_new'.
2025-05-18 16:44:28.275 -03:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE curso (
    curso_id integer GENERATED BY DEFAULT AS IDENTITY,
    nome text NOT NULL,
    CONSTRAINT "PK_curso" PRIMARY KEY (curso_id)
);
2025-05-18 16:44:28.331 -03:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE empresa_parceira (
    empresa_id integer GENERATED BY DEFAULT AS IDENTITY,
    nome text NOT NULL,
    senha text NOT NULL,
    email text NOT NULL,
    CONSTRAINT "PK_empresa_parceira" PRIMARY KEY (empresa_id)
);
2025-05-18 16:44:28.386 -03:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE instituicao (
    instituicao_id integer GENERATED BY DEFAULT AS IDENTITY,
    nome text NOT NULL,
    CONSTRAINT "PK_instituicao" PRIMARY KEY (instituicao_id)
);
2025-05-18 16:44:28.463 -03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE produto (
    produto_id integer GENERATED BY DEFAULT AS IDENTITY,
    foto bytea NOT NULL,
    descricao text NOT NULL,
    preco integer NOT NULL,
    empresa_id integer NOT NULL,
    CONSTRAINT "PK_produto" PRIMARY KEY (produto_id),
    CONSTRAINT "FK_produto_empresa_parceira_empresa_id" FOREIGN KEY (empresa_id) REFERENCES empresa_parceira (empresa_id) ON DELETE CASCADE
);
2025-05-18 16:44:28.524 -03:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE aluno (
    aluno_id integer GENERATED BY DEFAULT AS IDENTITY,
    rg text NOT NULL,
    cpf text NOT NULL,
    email text NOT NULL,
    senha text NOT NULL,
    instituicao_id integer NOT NULL,
    curso_id integer NOT NULL,
    moedas integer NOT NULL,
    CONSTRAINT "PK_aluno" PRIMARY KEY (aluno_id),
    CONSTRAINT "FK_aluno_curso_curso_id" FOREIGN KEY (curso_id) REFERENCES curso (curso_id) ON DELETE CASCADE,
    CONSTRAINT "FK_aluno_instituicao_instituicao_id" FOREIGN KEY (instituicao_id) REFERENCES instituicao (instituicao_id) ON DELETE CASCADE
);
2025-05-18 16:44:28.581 -03:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE departamento (
    departamento_id integer GENERATED BY DEFAULT AS IDENTITY,
    nome text NOT NULL,
    instituicao_id integer NOT NULL,
    curso_id integer NOT NULL,
    CONSTRAINT "PK_departamento" PRIMARY KEY (departamento_id),
    CONSTRAINT "FK_departamento_curso_curso_id" FOREIGN KEY (curso_id) REFERENCES curso (curso_id) ON DELETE CASCADE,
    CONSTRAINT "FK_departamento_instituicao_instituicao_id" FOREIGN KEY (instituicao_id) REFERENCES instituicao (instituicao_id) ON DELETE CASCADE
);
2025-05-18 16:44:28.632 -03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE transacao_aluno_empresa (
    transacao_id integer GENERATED BY DEFAULT AS IDENTITY,
    empresa_id integer NOT NULL,
    produto_id integer NOT NULL,
    tipo_transacao integer NOT NULL,
    aluno_id integer NOT NULL,
    motivo text NOT NULL,
    valor numeric NOT NULL,
    data_transacao timestamp with time zone NOT NULL,
    CONSTRAINT "PK_transacao_aluno_empresa" PRIMARY KEY (transacao_id),
    CONSTRAINT "FK_transacao_aluno_empresa_aluno_aluno_id" FOREIGN KEY (aluno_id) REFERENCES aluno (aluno_id) ON DELETE CASCADE,
    CONSTRAINT "FK_transacao_aluno_empresa_empresa_parceira_empresa_id" FOREIGN KEY (empresa_id) REFERENCES empresa_parceira (empresa_id) ON DELETE CASCADE,
    CONSTRAINT "FK_transacao_aluno_empresa_produto_produto_id" FOREIGN KEY (produto_id) REFERENCES produto (produto_id) ON DELETE CASCADE
);
2025-05-18 16:44:28.683 -03:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE professor (
    professor_id integer GENERATED BY DEFAULT AS IDENTITY,
    nome text NOT NULL,
    email text NOT NULL,
    senha text NOT NULL,
    cpf text NOT NULL,
    departamento_id integer NOT NULL,
    moedas integer NOT NULL,
    CONSTRAINT "PK_professor" PRIMARY KEY (professor_id),
    CONSTRAINT "FK_professor_departamento_departamento_id" FOREIGN KEY (departamento_id) REFERENCES departamento (departamento_id) ON DELETE CASCADE
);
2025-05-18 16:44:28.715 -03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE professor_departamento (
    professor_departamento_id integer GENERATED BY DEFAULT AS IDENTITY,
    professor_id integer NOT NULL,
    departamento_id integer NOT NULL,
    CONSTRAINT "PK_professor_departamento" PRIMARY KEY (professor_departamento_id),
    CONSTRAINT "FK_professor_departamento_departamento_departamento_id" FOREIGN KEY (departamento_id) REFERENCES departamento (departamento_id) ON DELETE CASCADE,
    CONSTRAINT "FK_professor_departamento_professor_professor_id" FOREIGN KEY (professor_id) REFERENCES professor (professor_id) ON DELETE CASCADE
);
2025-05-18 16:44:28.791 -03:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE transacao_professor_aluno (
    transacao_id integer GENERATED BY DEFAULT AS IDENTITY,
    professor_id integer NOT NULL,
    tipo_transacao integer NOT NULL,
    aluno_id integer NOT NULL,
    motivo text NOT NULL,
    valor numeric NOT NULL,
    data_transacao timestamp with time zone NOT NULL,
    CONSTRAINT "PK_transacao_professor_aluno" PRIMARY KEY (transacao_id),
    CONSTRAINT "FK_transacao_professor_aluno_aluno_aluno_id" FOREIGN KEY (aluno_id) REFERENCES aluno (aluno_id) ON DELETE CASCADE,
    CONSTRAINT "FK_transacao_professor_aluno_professor_professor_id" FOREIGN KEY (professor_id) REFERENCES professor (professor_id) ON DELETE CASCADE
);
2025-05-18 16:44:28.811 -03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_aluno_curso_id" ON aluno (curso_id);
2025-05-18 16:44:28.831 -03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_aluno_instituicao_id" ON aluno (instituicao_id);
2025-05-18 16:44:28.848 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_departamento_curso_id" ON departamento (curso_id);
2025-05-18 16:44:28.869 -03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_departamento_instituicao_id" ON departamento (instituicao_id);
2025-05-18 16:44:28.891 -03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_produto_empresa_id" ON produto (empresa_id);
2025-05-18 16:44:28.914 -03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_professor_departamento_id" ON professor (departamento_id);
2025-05-18 16:44:28.931 -03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_professor_departamento_departamento_id" ON professor_departamento (departamento_id);
2025-05-18 16:44:28.951 -03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_professor_departamento_professor_id" ON professor_departamento (professor_id);
2025-05-18 16:44:28.969 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_transacao_aluno_empresa_aluno_id" ON transacao_aluno_empresa (aluno_id);
2025-05-18 16:44:28.986 -03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_transacao_aluno_empresa_empresa_id" ON transacao_aluno_empresa (empresa_id);
2025-05-18 16:44:29.004 -03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_transacao_aluno_empresa_produto_id" ON transacao_aluno_empresa (produto_id);
2025-05-18 16:44:29.022 -03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_transacao_professor_aluno_aluno_id" ON transacao_professor_aluno (aluno_id);
2025-05-18 16:44:29.040 -03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_transacao_professor_aluno_professor_id" ON transacao_professor_aluno (professor_id);
2025-05-18 16:44:29.049 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250505034913_new', '9.0.4');
2025-05-18 16:44:29.052 -03:00 [INF] Applying migration '20250518194356_AtualizacaoModelo'.
2025-05-18 16:44:29.080 -03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE professor ADD last_allocation_date timestamp with time zone NOT NULL DEFAULT TIMESTAMPTZ '-infinity';
2025-05-18 16:44:29.082 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250518194356_AtualizacaoModelo', '9.0.4');
2025-05-18 16:44:43.199 -03:00 [INF] Swagger UI available at http://localhost:3030/swagger/index.html
2025-05-18 16:44:43.333 -03:00 [INF] Server starting and listening on http://127.0.0.1:3030
2025-05-18 16:44:43.455 -03:00 [INF] Now listening on: http://127.0.0.1:3030
2025-05-18 16:44:43.459 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-18 16:44:43.460 -03:00 [INF] Hosting environment: Development
2025-05-18 16:44:43.461 -03:00 [INF] Content root path: C:\Users\i.cathalat\Downloads\lab_software\laboratorioDeSoftware\LAB003\Backend\sme
2025-05-18 17:38:31.990 -03:00 [INF] Swagger UI available at http://localhost:3030/swagger/index.html
2025-05-18 17:38:32.151 -03:00 [INF] Server starting and listening on http://127.0.0.1:3030
2025-05-18 17:38:32.280 -03:00 [INF] Now listening on: http://127.0.0.1:3030
2025-05-18 17:38:32.284 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-18 17:38:32.285 -03:00 [INF] Hosting environment: Development
2025-05-18 17:38:32.286 -03:00 [INF] Content root path: C:\Users\i.cathalat\Downloads\lab_software\laboratorioDeSoftware\LAB003\Backend\sme
